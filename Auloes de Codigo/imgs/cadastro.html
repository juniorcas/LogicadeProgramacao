<h1>AutoCarros Setúbal</h1>

<p>Cadastro de Carros para venda</p>
<p>Para adicionar um novo carro, preencha o formúlario a seguir:</p>

<form id="cadastro" onsubmit="return cadastrarCarro(event)">
<input type="text" name="modelo" placeholder="Modelo do Carro"><br>
<input type="text" name="ano" placeholder="Ano"><br>
<input type="text" name="preco" placeholder="Preco"><br>
<button type="submit">Cadastrar</button>
</form>

<script>
    function cadastrarCarro(event) {
        // aqui falamos para o navegador não utilizar a página após envio do formulário 
        event.preventDefault();

        // seleciona o form do documento e coloca na variavel formDeCadastro
        var formDeCadastro = document.querySelector("form");

        // obtem os dados doas campos do formulario 
        var dadosDeCadastro = new FormData(formDeCadastro);

        // obtem o modelo do carro
        var modelo = dadosDeCadastro.get("modelo");
     
        // obtem o ano do carro 
        var ano = dadosDeCadastro.get("ano");
       // ... apague o if que verifica o modelo e também o if que verifica o ano 
       // vamos substituir por essa verificacão:
       if (!modelo || !ano) {
           alert("Por favor, preencha o modelo e o ano do carro!");
           return false;
       }
       // ...

       // converte ano para número 
       ano = Number(ano)

       // verificar se o usuario entrou um numero invalido 
       if (isNaN(ano)) {
           alert("Número do ano do carro está invalido");
           return false;
       } else if (ano < 1886) { // verifica se o ano do carro é real
            alert("Não há registros de carros antes de 1886, criado por Karl Benz!")
            return false; 
       }

       // captura o ano atual do objeto Date 
       var anoAtual = new Date().getFullYear();
       

       // calcula idade do carro 
       var idadeDoCarro = anoAtual - anoDoCarro;

       // aplica o desconto
       var desconto;
       if (idadeDoCarro > 10) {
           desconto = 0.25;
       } else {
           desconto = 0;
       }

        // prepara mensagem de sucesso 
        var mensagem = "Carro " + modelo + " / " + ano + " cadastrado com sucesso!";
        alert(mensagem);
    }

    
</script>