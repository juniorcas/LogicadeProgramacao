<h1>AutoCarros Setúbal</h1>

<p>Cadastro de Carros para venda</p>
<p>Para adicionar um novo carro, preencha o formúlario a seguir:</p>

<form id="cadastro" onsubmit="return cadastrarCarro(event)">
<input type="text" name="modelo" placeholder="Modelo do Carro"><br>
<input type="text" name="ano" placeholder="Ano"><br>
<button type="submit">Cadastrar</button>
</form>

<script>
    function cadastrarCarro(event) {
        event.preventDefault();

        // seleciona o form do documento e coloca na variavel formDeCadastro 
        var formDeCadastro = document.querySelector("form");

        // obtem os dados dos campos do formúlario 
        var dadosDeCadastro = new FormData(formDeCadastro);

        // obtem o modelo do carro 
        var modelo = dadosDeCadastro.get("modelo");
       

        // obtem o ano do carro
        var ano = dadosDeCadastro.get("ano");
        if (!modelo || !ano) {
            alert("Por favor, preencha o modelo e o ano do carro!");
            return false;
        }

        // converter o ano para número
        ano = Number(ano)

        // verificar se o usuario entrou um numero inválido 
        if (isNaN(ano)) {
            alert("Número do ano do carro está inválido");
            return false;
        } else if (ano < 1886) { // verificar se o ano do carro é real
            alert("Não há registros de carros antes de 1886, criado por Karl Benz!");
            return false;
        }

        // captura o ano atual do objeto Date 
        var anoAtual = new Date().getFullYear();

        //calcula idade do carro 
        var idadeDocarro = anoAtual - anoDoCarro;

        // aplica o desconto
        var desconto;
        if (idadeDoCarro > 10) {
            desconto = 0.25;
        } else {
            desconto = 0;
        }
        

        // prepara mensagem de sucesso
        var mensagem = "Carro " + modelo + " / " + ano + " cadastrado com sucesso!";

        alert(mensagem);

    }
</script>